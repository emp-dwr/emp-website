<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Julianna Manning">

<title>Discrete Water Quality Report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="dwq-report_files/libs/clipboard/clipboard.min.js"></script>
<script src="dwq-report_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="dwq-report_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="dwq-report_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="dwq-report_files/libs/quarto-html/popper.min.js"></script>
<script src="dwq-report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="dwq-report_files/libs/quarto-html/anchor.min.js"></script>
<link href="dwq-report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="dwq-report_files/libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="dwq-report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="dwq-report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="dwq-report_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="dwq-report_files/libs/kePrint-0.0.1/kePrint.js"></script>

<link href="dwq-report_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">



</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Discrete Water Quality Report</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Julianna Manning </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The Department of Water Resources (DWR) and the US Bureau of Reclamation (USBR) are required by Water Right Decision 1641 (D-1641) to collect discrete water chemistry data to monitor the water quality at select sites in the upper San Francisco Estuary (Estuary). This report describes the results of these monitoring efforts for water year 2024 (October 1st 2023 through September 30th 2024) which was classified as a above normal year in the Sacramento and San Joaquin Valleys <a href="https://cdec.water.ca.gov/reportapp/javareports?name=WSIHIST">(source)</a>. Results are compared to the previous water year, which was classified as wet in both valleys.</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<p>Discrete water quality samples were collected monthly at 24 monitoring sites throughout the Upper Estuary and were grouped into regions based on their geographic location (<a href="#fig-stations" class="quarto-xref">Figure&nbsp;1</a>; <a href="#tbl-stations" class="quarto-xref">Table&nbsp;1</a>). These sites represent a variety of aquatic habitats, from narrow, freshwater channels to broad, estuarine bays.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-stations" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-stations-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../../admin/figures-tables/dwq/dwq_station_map.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-stations-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Map of EMP’s discrete WQ field sites
</figcaption>
</figure>
</div>
</div>
</div>
<div id="tbl-stations" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-stations-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Discrete WQ stations included within each region of the Delta
</figcaption>
<div aria-describedby="tbl-stations-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table table-striped cell caption-top table-sm small">
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Region</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">WY Index</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Stations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; width: 33.3333333333333%;">Carquinez</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">NZ002, NZ004</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 33.3333333333333%;">Central Delta</td>
<td style="text-align: center; width: 33.3333333333333%;">San Joaquin</td>
<td style="text-align: center; width: 33.3333333333333%;">D16, D19, D26, D28A</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 33.3333333333333%;">Confluence</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">D4, D10, D12, D22</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 33.3333333333333%;">North Delta</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">C3A, NZ068</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 33.3333333333333%;">San Pablo Bay</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">D41, D41A, NZ325</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 33.3333333333333%;">South Delta</td>
<td style="text-align: center; width: 33.3333333333333%;">San Joaquin</td>
<td style="text-align: center; width: 33.3333333333333%;">C9, C10A, MD10A, P8</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 33.3333333333333%;">Suisun and Grizzly Bays</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">D6, D7, D8</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 33.3333333333333%;">Suisun Marsh</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">NZ032, NZS42</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>EMP collects data for six different field parameters and 18 different laboratory constituents. The analytes highlighted in this report are:</p>
<ul>
<li>Specific Conductance (μS/cm)</li>
<li>Turbidity (FNU)</li>
<li>Dissolved Ammonia (mg/L)</li>
<li>Chlorophyll <em>a</em> (μg/cm)</li>
<li>Dissolved Nitrate+Nitrite (mg/L)</li>
<li>Total Phosphorus (mg/L)</li>
</ul>
<p>Regional facet graphs were created for each parameter. The average, minimum and maximum values were determined for each analyte. Non-detect values were represented graphically via a vertical dashed line capped at the reporting limit. Average summary statistics are reported as the median (M) ± the median average deviation.</p>
<p>For more in-depth methodology, see <a href="https://portal.edirepository.org/nis/metadataviewer?packageid=edi.1320.6">here</a>.</p>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<section id="specific-conductance" class="level3">
<h3 class="anchored" data-anchor-id="specific-conductance">Specific Conductance</h3>
<p>The average specific conductance value was 674 ± 527 µS/cm; for comparison, the previous year average was 538 ± 417 µS/cm. Values ranged from 108 µS/cm to 44700 µS/cm. Per region average, minimum, and maximum values are shown in <a href="#tbl-spcndsurface" class="quarto-xref">Table&nbsp;2</a>; time series plots are shown in <a href="#fig-spcndsurface" class="quarto-xref">Figure&nbsp;2</a>.</p>
<div class="cell" data-layout-align="center">
<div id="tbl-spcndsurface" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-layout-align="center">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-spcndsurface-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Summary statistics for specific conductance by region in the San Francisco Bay-Delta estuary.
</figcaption>
<div aria-describedby="tbl-spcndsurface-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped do-not-create-environment cell caption-top table-sm small">
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Statistic</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Carquinez</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Central Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Confluence</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">North Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">San Pablo Bay</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">South Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun and Grizzly Bays</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun Marsh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Average</td>
<td style="text-align: center; width: 11.1111111111111%;">27000</td>
<td style="text-align: center; width: 11.1111111111111%;">234</td>
<td style="text-align: center; width: 11.1111111111111%;">684</td>
<td style="text-align: center; width: 11.1111111111111%;">157</td>
<td style="text-align: center; width: 11.1111111111111%;">34500</td>
<td style="text-align: center; width: 11.1111111111111%;">328</td>
<td style="text-align: center; width: 11.1111111111111%;">12400</td>
<td style="text-align: center; width: 11.1111111111111%;">4970</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 11.1111111111111%;">Min</td>
<td style="text-align: center; width: 11.1111111111111%;">4920</td>
<td style="text-align: center; width: 11.1111111111111%;">134</td>
<td style="text-align: center; width: 11.1111111111111%;">118</td>
<td style="text-align: center; width: 11.1111111111111%;">108</td>
<td style="text-align: center; width: 11.1111111111111%;">12100</td>
<td style="text-align: center; width: 11.1111111111111%;">130</td>
<td style="text-align: center; width: 11.1111111111111%;">222</td>
<td style="text-align: center; width: 11.1111111111111%;">674</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Max</td>
<td style="text-align: center; width: 11.1111111111111%;">37900</td>
<td style="text-align: center; width: 11.1111111111111%;">1030</td>
<td style="text-align: center; width: 11.1111111111111%;">14100</td>
<td style="text-align: center; width: 11.1111111111111%;">249</td>
<td style="text-align: center; width: 11.1111111111111%;">44700</td>
<td style="text-align: center; width: 11.1111111111111%;">771</td>
<td style="text-align: center; width: 11.1111111111111%;">29800</td>
<td style="text-align: center; width: 11.1111111111111%;">14500</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-spcndsurface" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-spcndsurface-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../../admin/figures-tables/dwq/dwq_ts_spcndsurface.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="720">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-spcndsurface-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Specific conductance by region in the San Francisco Bay-Delta estuary.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="turbidity" class="level3">
<h3 class="anchored" data-anchor-id="turbidity">Turbidity</h3>
<p>The average turbidity value was 9.15 ± 4.85 FNU; for comparison, the previous year average was 11.10 ± 6.00 FNU. Values ranged from 0.40 FNU to 72.20 FNU. Per region average, minimum, and maximum values are shown in <a href="#tbl-turbiditysurface" class="quarto-xref">Table&nbsp;3</a>; time series plots are shown in <a href="#fig-turbiditysurface" class="quarto-xref">Figure&nbsp;3</a>.</p>
<div class="cell" data-layout-align="center">
<div id="tbl-turbiditysurface" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-layout-align="center">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-turbiditysurface-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Summary statistics for turbidity by region in the San Francisco Bay-Delta estuary.
</figcaption>
<div aria-describedby="tbl-turbiditysurface-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped do-not-create-environment cell caption-top table-sm small">
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Statistic</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Carquinez</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Central Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Confluence</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">North Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">San Pablo Bay</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">South Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun and Grizzly Bays</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun Marsh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Average</td>
<td style="text-align: center; width: 11.1111111111111%;">12.60</td>
<td style="text-align: center; width: 11.1111111111111%;">3.95</td>
<td style="text-align: center; width: 11.1111111111111%;">10.70</td>
<td style="text-align: center; width: 11.1111111111111%;">5.12</td>
<td style="text-align: center; width: 11.1111111111111%;">12.40</td>
<td style="text-align: center; width: 11.1111111111111%;">5.00</td>
<td style="text-align: center; width: 11.1111111111111%;">13.40</td>
<td style="text-align: center; width: 11.1111111111111%;">31.40</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 11.1111111111111%;">Min</td>
<td style="text-align: center; width: 11.1111111111111%;">5.10</td>
<td style="text-align: center; width: 11.1111111111111%;">0.40</td>
<td style="text-align: center; width: 11.1111111111111%;">4.60</td>
<td style="text-align: center; width: 11.1111111111111%;">1.40</td>
<td style="text-align: center; width: 11.1111111111111%;">3.00</td>
<td style="text-align: center; width: 11.1111111111111%;">0.70</td>
<td style="text-align: center; width: 11.1111111111111%;">6.40</td>
<td style="text-align: center; width: 11.1111111111111%;">15.40</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Max</td>
<td style="text-align: center; width: 11.1111111111111%;">27.90</td>
<td style="text-align: center; width: 11.1111111111111%;">14.90</td>
<td style="text-align: center; width: 11.1111111111111%;">41.00</td>
<td style="text-align: center; width: 11.1111111111111%;">72.20</td>
<td style="text-align: center; width: 11.1111111111111%;">57.20</td>
<td style="text-align: center; width: 11.1111111111111%;">16.80</td>
<td style="text-align: center; width: 11.1111111111111%;">38.90</td>
<td style="text-align: center; width: 11.1111111111111%;">62.10</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-turbiditysurface" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-turbiditysurface-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../../admin/figures-tables/dwq/dwq_ts_turbiditysurface.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="720">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-turbiditysurface-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Turbidity by region in the San Francisco Bay-Delta estuary.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="dissolved-ammonia" class="level3">
<h3 class="anchored" data-anchor-id="dissolved-ammonia">Dissolved Ammonia</h3>
<p>The average dissolved ammonia value was 0.05 ± 0.00 mg/L; for comparison, the previous year average was 0.05 ± 0.00 mg/L. Values ranged from &lt; 0.05 mg/L to 0.62 mg/L. 58.29% of samples were below the reporting limit. Per region average, minimum, and maximum values are shown in <a href="#tbl-dissammonia" class="quarto-xref">Table&nbsp;4</a>; time series plots are shown in <a href="#fig-dissammonia" class="quarto-xref">Figure&nbsp;4</a>.</p>
<div class="cell" data-layout-align="center">
<div id="tbl-dissammonia" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-layout-align="center">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-dissammonia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4: Summary statistics for dissolved ammonia by region in the San Francisco Bay-Delta estuary.
</figcaption>
<div aria-describedby="tbl-dissammonia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped do-not-create-environment cell caption-top table-sm small">
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Statistic</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Carquinez</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Central Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Confluence</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">North Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">San Pablo Bay</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">South Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun and Grizzly Bays</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun Marsh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Average</td>
<td style="text-align: center; width: 11.1111111111111%;">0.09</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.086</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.058</td>
<td style="text-align: center; width: 11.1111111111111%;">0.081</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 11.1111111111111%;">Min</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Max</td>
<td style="text-align: center; width: 11.1111111111111%;">0.143</td>
<td style="text-align: center; width: 11.1111111111111%;">0.07</td>
<td style="text-align: center; width: 11.1111111111111%;">0.117</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.139</td>
<td style="text-align: center; width: 11.1111111111111%;">0.624</td>
<td style="text-align: center; width: 11.1111111111111%;">0.145</td>
<td style="text-align: center; width: 11.1111111111111%;">0.141</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: center; padding: 0;"><sup></sup> * value is RL</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-dissammonia" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dissammonia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../../admin/figures-tables/dwq/dwq_ts_dissammonia.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="720">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dissammonia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Dissolved ammonia by region in the San Francisco Bay-Delta estuary.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="chlorophyll-a" class="level3">
<h3 class="anchored" data-anchor-id="chlorophyll-a">Chlorophyll <em>a</em></h3>
<p>The average chlorophyll a value was 1.98 ± 0.70 µg/L; for comparison, the previous year average was 2.20 ± 0.96 µg/L. Values ranged from 0.59 µg/L to 53.10 µg/L. Per region average, minimum, and maximum values are shown in <a href="#tbl-chla" class="quarto-xref">Table&nbsp;5</a>; time series plots are shown in <a href="#fig-chla" class="quarto-xref">Figure&nbsp;5</a>.</p>
<div class="cell" data-layout-align="center">
<div id="tbl-chla" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-layout-align="center">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-chla-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5: Summary statistics for chlorophyll a by region in the San Francisco Bay-Delta estuary.
</figcaption>
<div aria-describedby="tbl-chla-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped do-not-create-environment cell caption-top table-sm small">
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Statistic</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Carquinez</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Central Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Confluence</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">North Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">San Pablo Bay</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">South Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun and Grizzly Bays</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun Marsh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Average</td>
<td style="text-align: center; width: 11.1111111111111%;">1.79</td>
<td style="text-align: center; width: 11.1111111111111%;">1.57</td>
<td style="text-align: center; width: 11.1111111111111%;">2.08</td>
<td style="text-align: center; width: 11.1111111111111%;">1.37</td>
<td style="text-align: center; width: 11.1111111111111%;">2.64</td>
<td style="text-align: center; width: 11.1111111111111%;">2.18</td>
<td style="text-align: center; width: 11.1111111111111%;">1.78</td>
<td style="text-align: center; width: 11.1111111111111%;">3.22</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 11.1111111111111%;">Min</td>
<td style="text-align: center; width: 11.1111111111111%;">0.89</td>
<td style="text-align: center; width: 11.1111111111111%;">0.59</td>
<td style="text-align: center; width: 11.1111111111111%;">0.86</td>
<td style="text-align: center; width: 11.1111111111111%;">0.72</td>
<td style="text-align: center; width: 11.1111111111111%;">1.05</td>
<td style="text-align: center; width: 11.1111111111111%;">0.67</td>
<td style="text-align: center; width: 11.1111111111111%;">0.90</td>
<td style="text-align: center; width: 11.1111111111111%;">1.28</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Max</td>
<td style="text-align: center; width: 11.1111111111111%;">4.59</td>
<td style="text-align: center; width: 11.1111111111111%;">4.90</td>
<td style="text-align: center; width: 11.1111111111111%;">4.18</td>
<td style="text-align: center; width: 11.1111111111111%;">4.18</td>
<td style="text-align: center; width: 11.1111111111111%;">5.90</td>
<td style="text-align: center; width: 11.1111111111111%;">53.10</td>
<td style="text-align: center; width: 11.1111111111111%;">7.53</td>
<td style="text-align: center; width: 11.1111111111111%;">8.54</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-chla" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-chla-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../../admin/figures-tables/dwq/dwq_ts_chla.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="720">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-chla-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Chlorophyll a by region in the San Francisco Bay-Delta estuary.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="dissolved-nitrate-nitrite" class="level3">
<h3 class="anchored" data-anchor-id="dissolved-nitrate-nitrite">Dissolved Nitrate + Nitrite</h3>
<p>The average dissolved nitrate+nitrite value was 0.20 ± 0.08 mg/L; for comparison, the previous year average was 0.22 ± 0.11 mg/L. Values ranged from &lt; 0.05 mg/L to 2.66 mg/L. 4.97% of samples were below the reporting limit. Per region average, minimum, and maximum values are shown in <a href="#tbl-dissnitratenitrite" class="quarto-xref">Table&nbsp;6</a>; time series plots are shown in <a href="#fig-dissnitratenitrite" class="quarto-xref">Figure&nbsp;6</a>.</p>
<div class="cell" data-layout-align="center">
<div id="tbl-dissnitratenitrite" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-layout-align="center">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-dissnitratenitrite-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;6: Summary statistics for dissolved nitrate nitrite by region in the San Francisco Bay-Delta estuary.
</figcaption>
<div aria-describedby="tbl-dissnitratenitrite-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped do-not-create-environment cell caption-top table-sm small">
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Statistic</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Carquinez</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Central Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Confluence</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">North Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">San Pablo Bay</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">South Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun and Grizzly Bays</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun Marsh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Average</td>
<td style="text-align: center; width: 11.1111111111111%;">0.22</td>
<td style="text-align: center; width: 11.1111111111111%;">0.1615</td>
<td style="text-align: center; width: 11.1111111111111%;">0.16</td>
<td style="text-align: center; width: 11.1111111111111%;">0.17</td>
<td style="text-align: center; width: 11.1111111111111%;">0.21</td>
<td style="text-align: center; width: 11.1111111111111%;">0.5995</td>
<td style="text-align: center; width: 11.1111111111111%;">0.19</td>
<td style="text-align: center; width: 11.1111111111111%;">0.29</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 11.1111111111111%;">Min</td>
<td style="text-align: center; width: 11.1111111111111%;">0.15</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.06</td>
<td style="text-align: center; width: 11.1111111111111%;">0.08</td>
<td style="text-align: center; width: 11.1111111111111%;">0.11</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.14</td>
<td style="text-align: center; width: 11.1111111111111%;">0.11</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Max</td>
<td style="text-align: center; width: 11.1111111111111%;">0.40</td>
<td style="text-align: center; width: 11.1111111111111%;">0.578</td>
<td style="text-align: center; width: 11.1111111111111%;">0.58</td>
<td style="text-align: center; width: 11.1111111111111%;">0.42</td>
<td style="text-align: center; width: 11.1111111111111%;">0.38</td>
<td style="text-align: center; width: 11.1111111111111%;">2.66</td>
<td style="text-align: center; width: 11.1111111111111%;">0.40</td>
<td style="text-align: center; width: 11.1111111111111%;">0.45</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: center; padding: 0;"><sup></sup> * value is RL</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-dissnitratenitrite" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dissnitratenitrite-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../../admin/figures-tables/dwq/dwq_ts_dissnitratenitrite.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="720">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dissnitratenitrite-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Dissovled nitrate nitrite by region in the San Francisco Bay-Delta estuary.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="total-phosphorus" class="level3">
<h3 class="anchored" data-anchor-id="total-phosphorus">Total Phosphorus</h3>
<p>The average total phosphorus value was 0.08 ± 0.02 mg/L; for comparison, the previous year average was 0.09 ± 0.02 mg/L. Values ranged from &lt; 0.01 mg/L to 0.22 mg/L. 0.28% of samples were below the reporting limit. Per region average, minimum, and maximum values are shown in <a href="#tbl-totphos" class="quarto-xref">Table&nbsp;7</a>; time series plots are shown in <a href="#fig-totphos" class="quarto-xref">Figure&nbsp;7</a>.</p>
<div class="cell" data-layout-align="center">
<div id="tbl-totphos" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-layout-align="center">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-totphos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;7: Summary statistics for total phosphorus by region in the San Francisco Bay-Delta estuary.
</figcaption>
<div aria-describedby="tbl-totphos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped do-not-create-environment cell caption-top table-sm small">
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Statistic</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Carquinez</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Central Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Confluence</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">North Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">San Pablo Bay</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">South Delta</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun and Grizzly Bays</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Suisun Marsh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Average</td>
<td style="text-align: center; width: 11.1111111111111%;">0.10</td>
<td style="text-align: center; width: 11.1111111111111%;">0.06</td>
<td style="text-align: center; width: 11.1111111111111%;">0.07</td>
<td style="text-align: center; width: 11.1111111111111%;">0.05</td>
<td style="text-align: center; width: 11.1111111111111%;">0.1</td>
<td style="text-align: center; width: 11.1111111111111%;">0.11</td>
<td style="text-align: center; width: 11.1111111111111%;">0.08</td>
<td style="text-align: center; width: 11.1111111111111%;">0.12</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 11.1111111111111%;">Min</td>
<td style="text-align: center; width: 11.1111111111111%;">0.07</td>
<td style="text-align: center; width: 11.1111111111111%;">0.03</td>
<td style="text-align: center; width: 11.1111111111111%;">0.03</td>
<td style="text-align: center; width: 11.1111111111111%;">0.03</td>
<td style="text-align: center; width: 11.1111111111111%;">0.01*</td>
<td style="text-align: center; width: 11.1111111111111%;">0.04</td>
<td style="text-align: center; width: 11.1111111111111%;">0.03</td>
<td style="text-align: center; width: 11.1111111111111%;">0.08</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 11.1111111111111%;">Max</td>
<td style="text-align: center; width: 11.1111111111111%;">0.14</td>
<td style="text-align: center; width: 11.1111111111111%;">0.10</td>
<td style="text-align: center; width: 11.1111111111111%;">0.09</td>
<td style="text-align: center; width: 11.1111111111111%;">0.16</td>
<td style="text-align: center; width: 11.1111111111111%;">0.211</td>
<td style="text-align: center; width: 11.1111111111111%;">0.18</td>
<td style="text-align: center; width: 11.1111111111111%;">0.12</td>
<td style="text-align: center; width: 11.1111111111111%;">0.22</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: center; padding: 0;"><sup></sup> * value is RL</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-totphos" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-totphos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../../admin/figures-tables/dwq/dwq_ts_totphos.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="720">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-totphos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Total phosphorus by region in the San Francisco Bay-Delta estuary.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="interpretations" class="level2">
<h2 class="anchored" data-anchor-id="interpretations">Interpretations</h2>
<p><write interpretations="" here=""></write></p>
</section>
<section id="archived-reports" class="level2">
<h2 class="anchored" data-anchor-id="archived-reports">Archived Reports</h2>
<p>Previous EMP discrete water quality reports can be found <a href="https://github.com/emp-dwr/emp-website/tree/gh-pages/admin/archive/d-wq">here</a>.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>